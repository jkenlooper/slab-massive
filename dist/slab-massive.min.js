!function(t,i){const s=300;class e{constructor(t,i,s){this.start=null,this.element=t,this.startX=t.scrollLeft,this.startY=t.scrollTop,this.distX=i-this.startX,this.distY=s-this.startY,this.animateID=window.requestAnimationFrame(this.step.bind(this))}step(t){this.start||(this.start=t);let i=t-this.start,e=Math.round(this.startX+Math.min(i/s,1)*this.distX),h=Math.round(this.startY+Math.min(i/s,1)*this.distY);this.element.scrollLeft=e,this.element.scrollTop=h,i<s&&(this.animateID=window.requestAnimationFrame(this.step.bind(this)))}stop(){window.cancelAnimationFrame(this.animateID)}}const h=`
:host{display:block;contain:content}*{box-sizing:border-box}.sm-Slab{position:relative;overflow:hidden}.sm-Slab>*{position:absolute;z-index:2}.sm-Slab-container{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;z-index:1;overflow:scroll}.sm-Slab-slotWrapper{overflow:hidden}.sm-Slab-slot{-webkit-transform-origin:0 0;transform-origin:0 0;outline:1px solid red}.sm-Slab-slot.is-animating{-webkit-transition:-webkit-transform .5s linear;transition:-webkit-transform .5s linear;transition:transform .5s linear;transition:transform .5s linear,-webkit-transform .5s linear}.sm-Slab-zoomControls{right:0;bottom:0;background-color:rgba(0,0,0,.4)}.sm-Slab-zoomIn,.sm-Slab-zoomOut{display:block;margin:10px;width:30px;height:30px;text-align:center}.sm-ViewFinder{top:5%;left:5%;cursor:crosshair;outline:1px solid #000;background-color:hsla(0,0%,100%,.4)}.sm-ViewFinder.is-zoom1{display:none}.sm-ViewFinder-box{-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transition:-webkit-transform .3s linear;transition:-webkit-transform .3s linear;transition:transform .3s linear;transition:transform .3s linear,-webkit-transform .3s linear;cursor:crosshair;border:1px solid red;width:30px;height:30px}.sm-ViewFinder-box.is-dragging{-webkit-transition:-webkit-transform 0ms linear;transition:-webkit-transform 0ms linear;transition:transform 0ms linear;transition:transform 0ms linear,-webkit-transform 0ms linear;background-color:rgba(0,0,0,.2)}`,o=`
<div class=sm-Slab><div class=sm-ViewFinder><slot id=view-finder name=view-finder></slot><div class=sm-ViewFinder-box></div></div><div class=sm-Slab-container unselectable=on onselectstart="return false;"onmousedown="return false;"><div class=sm-Slab-slotWrapper><div class=sm-Slab-slot><slot></slot></div></div></div><div class=sm-Slab-zoomControls><button class=sm-Slab-zoomIn ng-click=PuzzleBoardController.zoomIn()>+</button> <button class=sm-Slab-zoomOut ng-click=PuzzleBoardController.zoomOut()>-</button></div></div>`,n=`
  <style>${h}</style>
  ${o}
  `,r=150,a=1;window.customElements.define("slab-massive",class extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML=n,this.slab=t.querySelector(".sm-Slab"),this.container=t.querySelector(".sm-Slab-container"),this._slot=t.querySelector(".sm-Slab-slot"),this.slotWrapper=t.querySelector(".sm-Slab-slotWrapper"),this.viewFinder=t.querySelector(".sm-ViewFinder"),this.viewFinderBox=t.querySelector(".sm-ViewFinder-box"),this.viewFinder.x=this.viewFinder.offsetLeft+this.offsetLeft,this.viewFinder.y=this.viewFinder.offsetTop+this.offsetTop,this.zoomInEl=t.querySelector(".sm-Slab-zoomIn");let i=this.zoomIn.bind(this);this.zoomInEl.addEventListener("click",i),this.zoomOutEl=t.querySelector(".sm-Slab-zoomOut");let s=this.zoomOut.bind(this);this.zoomOutEl.addEventListener("click",s),this.render();let e=this.handleScroll.bind(this);this.container.addEventListener("scroll",e),this.viewFinder.addEventListener("mousedown",this.handleViewFinderMousedown.bind(this))}connectedCallback(){}static get observedAttributes(){return["zoom","offset-x","offset-y","scale","width","height","fill"]}attributeChangedCallback(t,i,s){if(i!==s)switch(this[t]=s,t){case"zoom":this.renderZoom(),this.renderSlotPosition();break;case"offset-x":this.renderSlotPosition();break;case"offset-y":this.renderSlotPosition();break;case"scale":this.render();break;case"width":this.render();break;case"height":this.render();break;case"fill":this.render()}}render(){const t=Number(void 0!==this.scale?this.scale:this.getAttribute("scale")),i=Number(void 0!==this.zoom?this.zoom:this.getAttribute("zoom"));if(0===t){let t=this.parentNode.offsetWidth,i=this.parentNode.offsetHeight;"contain"===this.fill&&t/this.width*this.height>i?this.scale=i/this.height:this.scale=t/this.width,this.attributeChangedCallback("scale","0",this.scale)}0===i&&(this.zoom=a/this.scale,this.attributeChangedCallback("zoom","0",this.zoom)),this.style.width=this.slab.style.width=this.container.style.width=this.width*this.scale+"px",this.style.height=this.slab.style.height=this.container.style.height=this.height*this.scale+"px",this.viewFinder.scale=r/this.width,this.viewFinder.style.width="150px",this.viewFinder.style.height=Math.floor(this.viewFinder.scale*this.height)+"px",this.viewFinderBox.style.height=Math.floor(this.height*this.viewFinder.scale)+"px",this.viewFinderBox.style.width=Math.floor(this.width*this.viewFinder.scale)+"px",this._slot.style.width=this.width+"px",this._slot.style.height=this.height+"px",this.renderZoom(),this.renderSlotPosition()}renderZoom(){1===this.zoom?this.viewFinder.classList.add("is-zoom1"):this.viewFinder.classList.remove("is-zoom1"),a/this.scale===this.zoom?this.zoomInEl.setAttribute("disabled",!0):this.zoomInEl.hasAttribute("disabled")&&this.zoomInEl.removeAttribute("disabled"),this.zoom<=1?this.zoomOutEl.setAttribute("disabled",!0):this.zoomOutEl.hasAttribute("disabled")&&this.zoomOutEl.removeAttribute("disabled")}renderSlotPosition(){this.slotWrapper.style.width=this.width*this.scale*this.zoom+"px",this.slotWrapper.style.height=this.height*this.scale*this.zoom+"px",this._slot.style.transform=`scale(${this.scale*this.zoom})`,this.viewFinderBox.style.transform=`translate3d(${Math.floor(this.offsetX*this.viewFinder.scale/this.scale/this.zoom)}px, ${Math.floor(this.offsetY*this.viewFinder.scale/this.scale/this.zoom)}px, 0) scale(${1/this.zoom})`,this.viewFinderBox.style.borderWidth=this.zoom+"px"}moveBy(t,i){this.pageToOffset(this.viewFinder.startX+t,this.viewFinder.startY+i)}scrollTo(t,i,s){this.scrollAnimation&&(this.scrollAnimation.stop(),this.scrollAnimation=null),s?(this._slot.classList.add("is-animating"),this.scrollAnimation=new e(this.container,t,i)):(this._slot.classList.remove("is-animating"),this.container.scrollLeft=t,this.container.scrollTop=i)}pageToOffset(t,i,s){this.scrollAnimation&&(this.scrollAnimation.stop(),this.scrollAnimation=null),this.viewFinder.x=t,this.viewFinder.y=i;let h=t-(this.viewFinder.offsetLeft+this.offsetLeft),o=i-(this.viewFinder.offsetTop+this.offsetTop),n=h/this.viewFinder.scale*this.scale*this.zoom,r=o/this.viewFinder.scale*this.scale*this.zoom;s?(this._slot.classList.add("is-animating"),this.scrollAnimation=new e(this.container,n,r)):(this._slot.classList.remove("is-animating"),this.container.scrollLeft=n,this.container.scrollTop=r)}handleScroll(t){let i=this.container.scrollLeft*this.viewFinder.scale,s=this.container.scrollTop*this.viewFinder.scale;this.offsetX=i/this.viewFinder.scale,this.offsetY=s/this.viewFinder.scale}handleViewFinderMousedown(t){this.viewFinderClick({type:"tap",pageX:t.pageX,pageY:t.pageY})}viewFinderClick(t){const i=t.pageX-this.viewFinderBox.offsetWidth/this.zoom/2,s=t.pageY-this.viewFinderBox.offsetHeight/this.zoom/2;switch(t.type){case"tap":this.pageToOffset(i,s,!0);break;case"panstart":this.viewFinderBox.classList.add("is-dragging"),this.viewFinder.x=this.viewFinder.startX=i,this.viewFinder.y=this.viewFinder.startY=s;break;case"panmove":this.moveBy(t.deltaX,t.deltaY);break;case"panend":this.viewFinderBox.classList.remove("is-dragging"),this.moveBy(t.deltaX,t.deltaY)}}zoomIn(){const t=2*Number(this.offsetX)+this.offsetWidth/4*2,i=2*Number(this.offsetY)+this.offsetHeight/4*2,s=Math.min(a/this.scale,2*this.zoom);this.setAttribute("zoom",s),this.zoom=s,this.scrollTo(t,i,!1)}zoomOut(){const t=Math.max(Number(this.offsetX)/2-this.offsetWidth/4,0),i=Math.max(Number(this.offsetY)/2-this.offsetHeight/4,0),s=Math.max(this.zoom/2,1);this.setAttribute("zoom",s),this.zoom=s,this.scrollTo(t,i,!1)}get offsetX(){return this.getAttribute("offset-x")}set offsetX(t){this.setAttribute("offset-x",t)}get offsetY(){return this.getAttribute("offset-y")}set offsetY(t){this.setAttribute("offset-y",t)}get width(){return this.getAttribute("width")}set width(t){t!==this.width&&this.setAttribute("width",t)}get height(){return this.getAttribute("height")}set height(t){t!==this.height&&this.setAttribute("height",t)}get fill(){return this.getAttribute("fill")}set fill(t){t!==this.fill&&this.setAttribute("fill",t)}}),i.slabMassive=t}({},function(){return this}());